{
  "pluginAlias": "VolvoEX30",
  "pluginType": "platform",
  "singular": false,
  "headerDisplay": "ðŸš— **Volvo EX30 Plugin** - Connect your EX30 to HomeKit with individual named accessories for better organization. Features battery (as blind), lock management, thermostat climate control, and locate switch.",
  "footerDisplay": "ðŸ”‘ **Token Setup**: Generate tokens using included scripts: `cd node_modules/homebridge-volvo-ex30 && node scripts/easy-oauth.js` then copy the refresh token to the configuration below.",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "Volvo EX30",
        "required": true
      },
      "vin": {
        "title": "Vehicle Identification Number (VIN)",
        "type": "string",
        "required": true,
        "description": "17-character VIN of your Volvo EX30"
      },
      "clientId": {
        "title": "Volvo API Client ID",
        "type": "string",
        "required": true,
        "description": "Client ID from Volvo Developer Portal"
      },
      "clientSecret": {
        "title": "Volvo API Client Secret",
        "type": "string",
        "required": true,
        "description": "Client Secret from Volvo Developer Portal"
      },
      "vccApiKey": {
        "title": "VCC API Key",
        "type": "string",
        "required": true,
        "description": "Primary or Secondary VCC API Key from Volvo Developer Portal"
      },
      "initialRefreshToken": {
        "title": "Initial Refresh Token",
        "type": "string",
        "required": false,
        "description": "Initial OAuth refresh token for first-time setup (plugin manages tokens automatically after initial setup)"
      },
      "region": {
        "title": "Region",
        "type": "string",
        "default": "eu",
        "enum": ["eu", "na"],
        "enumNames": ["Europe/Middle East/Africa", "North America/Latin America"],
        "description": "Your vehicle's region"
      },
      "pollingInterval": {
        "title": "Polling Interval (minutes)",
        "type": "integer",
        "default": 5,
        "minimum": 1,
        "maximum": 60,
        "description": "How often to check vehicle status (respects API rate limits)"
      },
      "presentationMode": {
        "title": "Presentation Mode",
        "type": "string",
        "default": "simple",
        "oneOf": [
          {
            "title": "Simple (4 Core Tiles)",
            "const": "simple"
          },
          {
            "title": "Advanced (All Sensors)",
            "const": "advanced"
          }
        ],
        "description": "Simple mode shows 4 essential tiles: Volvo Lock, Volvo Climate, Volvo Battery, Volvo Locate. Advanced mode shows all available sensors."
      },
      "accessoryNaming": {
        "title": "Accessory Naming Strategy",
        "type": "string",
        "default": "individual",
        "oneOf": [
          {
            "title": "Individual Accessories (EX30 Battery, EX30 Lock, etc.)",
            "const": "individual"
          },
          {
            "title": "Unified Accessory (All services under one tile)",
            "const": "unified"
          }
        ],
        "description": "Individual creates separate named accessories for each function (recommended). Unified puts all services under single accessory (legacy mode)."
      },
      "enableHonkFlash": {
        "title": "Enable Locate (Honk & Flash)",
        "type": "boolean",
        "default": true,
        "description": "Show honk and flash switch for locating your vehicle"
      },
      "enableAdvancedSensors": {
        "title": "Enable Advanced Sensors",
        "type": "boolean",
        "default": false,
        "description": "Show individual door/window sensors and diagnostics (only shown in Advanced mode)",
        "condition": {
          "functionBody": "return model.presentationMode === 'advanced';"
        }
      }
    }
  },
  "layout": [
    {
      "type": "fieldset",
      "title": "Vehicle Configuration",
      "items": [
        "name",
        "vin",
        "region"
      ]
    },
    {
      "type": "fieldset",
      "title": "Volvo API Credentials",
      "items": [
        "clientId",
        "clientSecret",
        "vccApiKey",
        "initialRefreshToken"
      ]
    },
    {
      "type": "fieldset",
      "title": "Presentation Settings",
      "items": [
        "pollingInterval",
        "presentationMode",
        "accessoryNaming",
        "enableHonkFlash",
        "enableAdvancedSensors"
      ]
    }
  ]
}